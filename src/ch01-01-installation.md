## การติดตั้ง

ขั้นตอนแรกในการติดตั้ง Rust คุณต้องดาวน์โหลด Rust ผ่าน `rustup` ซึ่งเป็นเครื่องมือบรรทัดคำสั่งสำหรับจัดการเวอร์ชั่นของ Rust และเครื่องมือที่เกี่ยวข้อง
คุณจำเป็นต้องเชื่อมต่ออินเทอร์เน็ตเพื่อดาวน์โหลด

> หมายเหตุ: หากคุณไม่ต้องการใช้งาน `rustup` ด้วยเหตุผลบางประการ โปรดดู
> [หน้าเว็บวิธีการติดตั้ง Rust ด้วยวิธีอื่น ๆ ][otherinstall] เพื่อดูตัวเลือกเพิ่มเติม

ขั้นตอนต่อไปนี้จะติดตั้งคอมไพเลอร์ของ Rust ในเวอร์ชั่นเสถียรอันล่าสุด
การรับประกันความเสถียรของ Rust ช่วยให้มั่นใจได้ว่า ตัวอย่างทั้งหมดในหนังสือนั้นจะยังคงสามารถคอมไพล์ได้ด้วย Rust เวอร์ชั่นที่ใหม่กว่า
แม้ผลลัพธ์อาจจะต่างกันเล็กน้อยในเวอร์ชั่นต่าง ๆ เนื่องจาก Rust 
มักจะปรับปรุงข้อความแสดงข้อผิดพลาดและคำเตือนอยู่เสมอ 
กล่าวอีกนัยหนึ่ง เวอร์ชั่นเสถียรของ Rust 
ที่คุณได้ติดตั้งโดยใช้ขั้นตอนข้างต้น ไม่ว่าจะเป็นเวอร์ชั่นที่ใหม่แค่ไหน
ก็ยังคงใช้งานได้ปกติตามที่คาดไว้กับเนื้อหาในหนังสือเล่มนี้


> ### สัญลักษณ์บรรทัดคำสั่ง
>
> ในบทนี้และตลอดทั้งเล่ม เราจะแสดงคำสั่งบางคำสั่งที่ใช้ในเทอร์มัล 
> คำสั่งที่คุณควรป้อนในเทอร์มินัลทั้งหมดจะเริ่มต้นด้วย `$` คุณไม่จำเป็นต้องพิมพ์ตัว `$` 
> ตัวอักษรนี้มีไว้เพื่อระบุการเริ่มต้นของแต่ละคำสั่ง บรรทัดที่ไม่ได้ขึ้นต้นด้วย `$` 
> มักจะเป็นผลลัพธ์ของคำสั่งก่อนหน้า นอกจากนี้ตัวอย่างเฉพาะของ PowerShell จะใช้ `>` แทน `$`


### การติดตั้ง `rustup` บน Linux หรือ MacOS

หากคุณใช้งาน Linux หรือ MacOS เปิดเทอร์มินัลและรันคำสั่งต่อไปนี้:

```console
$ curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
```

คำสั่งนี้จะดาวน์โหลดสคริปต์และเริ่มการติดตั้งเครื่องมือ `rustup`
ซึ่งจะใช้ติดตั้ง Rust เวอร์ชั่นเสถียรอันส่าสุด คุณอาจจะได้รับข้อความแจ้งเตือนให้ใส่รหัสผ่าน
หากการติดตั้งเสร็จสมบูรณ์ บรรทัดต่อไปนี้จะปรากฏขึ้น:

```text
Rust is installed now. Great!
```

คุณจำเป็นจะต้องมี *linker* ซึ่งเป็นโปรแกรมที่ Rust ใช้เพื่อรวมผลลัพธ์จากการคอมไพล์เป็นไฟล์เดียว
ซึ่งเป็นไปได้ว่าคุณมีอยู่แล้ว หาก linker ของคุณเกิดข้อผิดพลาด คุณควรติดตั้งคอมไพเลอร์ภาษา C
ซึ่งโดยปกติจะมี linker รวมอยู่ในนั้นด้วย คอมไพเลอร์ของ C ก็มีประโยชน์อื่นด้วยเช่นกัน เนื่องจากแพ็กเก็จบางตัวของ Rust ใช้งานโค้ดภาษา C และอาจจำเป็นต้องใช้คอมไพเลอร์ภาษา C

บน MacOS คุณสามารถติดตั้งคอมไพเลอร์ภาษา C โดยทำการรันคำสั่งต่อไปนี้:


```console
$ xcode-select --install
```

โดยทั่วไปแล้ว ผู้ใช้งาน Linux ควรติดตั้ง GCC หรือ Clang ตามเอกสารคู่มือประกอบการเผยแพร่
ตัวอย่างเช่น หากคุณใช้ Ubuntu คุณสามารถติดตั้งแพ็กเก็จ `build-essential` ได้

### การติดตั้ง `rustup` บน Windows

บน Windows ไปที่ [https://www.rust-lang.org/tools/install][install] 
และทำตามคำแนะนำสำหรับการติดตั้ง Rust เมื่อคุณทำตามขั้นตอนไปถึงจุดหนึ่ง คุณจะได้รับข้อความแจ้งเตือนให้ติดตั้ง
Visual Studio ซึ่งมี linker และไลบรารีที่จำเป็นในการคอมไพล์โปรแกรมรวมอยู่ด้วย
หากคุณต้องการความช่วยเหลือเพิ่มเติมในขั้นตอนนี้ ไปที่
[https://rust-lang.github.io/rustup/installation/windows-msvc.html][msvc]

ส่วนที่เหลือของหนังสือเล่มนี้ใช้คำสั่งที่ทำงานได้ทั้ง *cmd.exe* และ PowerShell
หากมีความแตกต่างที่จำเพาะเจาะจง เราจะอธิบายว่าควรใช้ข้อใด

### การแก้ไขปัญหา

หากต้องการตรวจสอบว่าคุณติดตั้ง Rust อย่างถูกต้องหรือไม่ เปิด shell และรันคำสั่งนี้:

```console
$ rustc --version
```

คุณจะพบกับหมายเลขเวอร์ชั่น แฮชของ commit และวันที่ commit สำหรับเวอร์ชั่นเสถียรอันล่าสุดที่เผยแพร่แล้ว ในรูปแบบต่อไปนี้:

```text
rustc x.y.z (abcabcabc yyyy-mm-dd)
```
หากคุณพบกับข้อความนี้ แสดงว่าคุณได้ติดตั้ง Rust เสร็จสมบูรณ์แล้ว หากคุณไม่เห็นข้อความนี้ ให้ตรวจสอบว่า Rust อยู่ในตัวแปรระบบ `%PATH%` ของคุณหรือไม่ โดยทำตามขั้นตอนดังนี้  

ใน Windows CMD ใช้:

```console
> echo %PATH%
```

ใน PowerShell ใช้:

```powershell
> echo $env:Path
```

ใน Linux และ macOS ใช้:

```console
$ echo $PATH
```

หากคุณทำทุกอย่างถูกต้อง แต่ Rust ยังคงใช้งานไม่ได้ มีหลายที่ที่คุณสามารถขอความช่วยเหลือได้
ค้นหาวิธีติดต่อกับ Rustaceans (ชื่อเล่นงี่เง่าที่เราใช้เรียกพวกเราเอง) คนอื่น ๆ ได้ที่
[the community page][community]

### การอัปเดตและการถอนการติดตั้ง

เมื่อติดตั้ง Rust ผ่าน `rustup` การอัปเดตเป็นเวอร์ชั่นล่าสุดจึงเป็นเรื่องที่ง่าย
โดยทำการรันคำสั่งอัปเดตต่อไปนี้บน shell ของคุณ:

```console
$ rustup update
```

หากต้องการถอนการติดตั้ง Rust และ `rustup` ให้รันคำสั่งถอนการติดตั้งต่อไปนี้จาก shell ของคุณ:

```console
$ rustup self uninstall
```

### เอกสารคู่มือภายใน

การติดตั้งของ Rust ยังมีสำเนาเอกสารอยู่ในเครื่อง เพื่อให้คุณสามารถอ่านแบบออฟไลน์ได้ 
รันคำสั่ง `rustup doc` เพื่อเปิดดูเอกสารคู่มือบนเบราว์เซอร์ของคุณ

เมื่อใดก็ตามที่ type หรือ function ในไลบรารีมาตรฐาน ซึ่งคุณไม่แน่ใจว่ามันทำหน้าที่อะไร หรือจะใช้งานอย่างไร ใช้เอกสารคู่มือประกอบส่วนต่อประสานโปรแกรมประยุกต์ (API) เพื่อค้นหาคำตอบ! 

[otherinstall]: https://forge.rust-lang.org/infra/other-installation-methods.html
[install]: https://www.rust-lang.org/tools/install
[msvc]: https://rust-lang.github.io/rustup/installation/windows-msvc.html
[community]: https://www.rust-lang.org/community
